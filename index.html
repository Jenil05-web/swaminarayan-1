<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Scan Here for Entry Details</title>
  <!-- Include the QRCode.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    // Constant Google Form URLs (these remain the same)
    const formUrl1 = "https://docs.google.com/forms/d/e/1FAIpQLSf94jLm-MBSgrAgYRMKn9kPyonZdAB8IrTq-ODmLd0QFYHPug/viewform";
    const formUrl2 = "https://docs.google.com/forms/d/1yf0ccQD4kPVM1368aFG-E3cM6mcHiHMv0HVbWTTK4G4/edit";

    // Helper function that creates a new child element inside a container and generates a QR code in it.
    function createQRCode(containerId, url) {
      const container = document.getElementById(containerId);
      // Replace container content with a new child div
      container.innerHTML = "<div id='" + containerId + "-child'></div>";
      new QRCode(document.getElementById(containerId + "-child"), {
        text: url,
        width: 200,
        height: 200,
        correctLevel: QRCode.CorrectLevel.H
      });
    }

    // Function to generate (or regenerate) both QR codes.
    function generateQRCodes() {
      // Generate (or replace) the first and second QR codes.
      createQRCode("qrContainer1", formUrl1);
      createQRCode("qrContainer2", formUrl2);

      // Display when the QR codes will refresh next.
      const nextRefresh = new Date(Date.now() + 20000);
      document.getElementById("expiryDisplay").innerText =
        "QR codes will refresh at: " + nextRefresh.toLocaleTimeString();

      console.log("QR codes regenerated for URLs:", formUrl1, formUrl2);
    }

    window.onload = function() {
      generateQRCodes(); // Initial generation
      setInterval(generateQRCodes, 20000); // Regenerate every 20 seconds
    };
  </script>
</head>
<body>
  <h1>Scan Here for Entry Details</h1>
  <p>Scan the QR codes below:</p>

  <h3>Existing QR Code</h3>
  <div id="qrContainer1"></div>

  <h3>New QR Code</h3>
  <div id="qrContainer2"></div>

  <p id="expiryDisplay"></p>
</body>
</html>
